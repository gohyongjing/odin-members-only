extends layout

block content
  h1= title
  p Welcome to #[em Members Only], a very basic Express website developed as an assignment for The Odin Project.

  h1 Dynamic content

  if error
    p Error getting dynamic content.
  else
    p The library has the following record counts:

    ul
      li #[strong Users:] !{data.user_count}
      li #[strong Messages:] !{data.messages.length}
    
    each message in data.messages
      hr
      h5 !{message.title} 
      if user && user.membership
        p #[strong !{message.author.name}] !{message.timestamp_formatted}
      if user && user.admin
        a(href=(`/message/${message._id}/delete`)) Delete
      p !{message.text}


    else
      li There are no messages
